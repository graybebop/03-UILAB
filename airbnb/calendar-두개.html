<!DOCTYPE html>
<html lang="kr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>TPOD</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!-- Noto Sans koran -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/swiper.css">
    <link rel="stylesheet" type="text/css" href="../css/styles.css">

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/swiper.min.js"></script>
    <script src="../js/common.js"></script>
</head>
<style>
    .grid-list {
        border: 0px solid #ddd;
    }
    
    .grid-list .items {
        margin: 5px 10px 15px 10px;
    }
    
    #calc {
        z-index: 10;
        position: fixed;
        bottom: 10px;
        padding: 10px;
        border: 1px solid #000;
        background-color: #fff;
    }
    
    @media(max-width:760px) {
        .wrapper {
            padding: 10px;
        }
    }
</style>

<body>
    <div class="airbnb-calendar"></div>


    <script>
        function uical() {

            this.init = function(calendar_wrapper, calendar_holder, btnCheckTime, prevBtn, nextBtn, dtwp, dtwp_2, yearName, inputCheck) {



                this.dateCount = 0;

                //this.dateCount = 1; //체크인 데이트
                //this.dateCount = 2; //체크아웃 데이트

                this.checkInDate = "";
                this.checkOutDate = "";

                this.bookingDate = [];

                this.cdp = document.getElementsByClassName('airbnb-calendar')[0];

                //캘린더 구조
                //캘린더 헤더
                this.calendar_wrapper = document.createElement('div'); //캘린더 전체 감싸기(id 별 하나씩 추가 가능)
                this.calendar_wrapper.setAttribute('id', calendar_wrapper);

                this.cdp.appendChild(this.calendar_wrapper);

                //   this.calendar_wrapper = document.getElementById('calendar-wrapper'); //캘린더 전체 감싸기(id 별 하나씩 추가 가능)
                this.calendar_header = document.createElement('div'); //캘린더 헤더
                this.btnMonthPrev = document.createElement('div'); //캘린더 헤더 좌, 우 버튼(월보기)
                this.btnMonthNext = document.createElement('div'); //캘린더 헤더 좌, 우 버튼(월보기)
                this.calendarHeaderText = document.createElement('div'); //캘린더 헤더 좌, 우 버튼(월보기)

                this.calendar_wrapper.appendChild(this.calendar_header);
                this.calendar_header.appendChild(this.btnMonthPrev);
                this.calendar_header.appendChild(this.btnMonthNext);
                this.calendar_header.appendChild(this.calendarHeaderText);


                this.calendar_header.setAttribute('class', calendar_holder);
                this.btnMonthPrev.setAttribute('class', prevBtn + ' btn prev calendar btn-white  btn-sm btn-circle');
                this.btnMonthNext.setAttribute('class', nextBtn + ' btn next calendar btn-white  btn-sm btn-circle');
                this.calendarHeaderText.setAttribute('class', 'cal_hd_txt');

                this.btnMonthPrev.innerHTML = '<span class="material-icons-outlined">chevron_left</span>';
                this.btnMonthNext.innerHTML = '<span class="material-icons-outlined">navigate_next</span>';


                //캘린더 바디
                this.calendar_body = document.createElement('div'); //캘린더 바디 좌, 우 버튼(월보기)
                this.calendar_body_table = document.createElement('table'); //캘린더 바디 테이블
                this.calendar_body_day_th = document.createElement('div'); //캘린더 바디 요일
                this.calendar_body_day_td = document.createElement('div'); //캘린더 바디 날짜

                //let calendar_body_table_tr = document.createElement('tr'); //캘린더 바디 테이블 TR
                //let calendar_body_table_th = document.createElement('th'); //캘린더 바디 테이블 TH
                //let calendar_body_table_td = document.createElement('td'); //캘린더 바디 테이블 TD

                this.calendar_wrapper.appendChild(this.calendar_body);
                this.calendar_body.setAttribute('class', 'cal_body');
                //this.calendar_body.appendChild(this.calendar_body_table);
                // this.calendar_body_table.setAttribute('class', 'cal_body_table');


                this.calendar_body.appendChild(this.calendar_body_day_td);
                this.date_1 = this.calendar_body_day_td.setAttribute('id', dtwp);
                console.log(this.date_1)

                this.calendar_body.appendChild(this.calendar_body_day_th);
                this.date_2 = this.calendar_body_day_th.setAttribute('id', dtwp_2);

                //달력 기본 정보
                this.date = new Date();
                this.current_year = this.date.getFullYear(); //current_year
                this.current_month = this.date.getMonth() + 1;
                this.fixedMonth = this.current_month;
                this.today = this.date.getDate();
                this.current_date = this.date.getDate();
                this.n = this.current_month; //달은 0부터 시작 그래서 +1 //n = current_month;
                this.d = this.current_date; //달은 0부터 시작 그래서 +1



                //달의 일수 구하기 ex>11월 달수의 일수
                let thisMonthDays = this.getDaysInMonth((this.current_year, this.current_month), this.current_month);

                this.displayWeekDays();
                this.createTable(this.getDaysInMonth(this.current_year, this.n), this.current_month, this.current_year, this.current_month);
                this.createTable(this.getDaysInMonth(this.current_year, this.n + 1), this.current_month + 1, this.current_year, this.current_month + 1);

            }


            this.displayWeekDays = function() {
                let weekday = ['일', '월', '화', '수', '목', '금', '토'];

                let weekhdr_table = document.createElement('table');
                let weekhdr_tr = document.createElement('tr');
                this.calendar_body_day_td.appendChild(weekhdr_table);
                weekhdr_table.appendChild(weekhdr_tr);

                for (let i = 0; i < weekday.length; i++) {

                    let weekhdr_td = document.createElement('th');
                    weekhdr_tr.appendChild(weekhdr_td);
                    weekhdr_td.innerText = weekday[i];
                }
            }

            this.createTable = function(col, k, this_current_year, this_current_month) {

                let colNum = 7;
                let boxRow = new Array(); //박스를 감싸는 줄 row
                let boxCol = new Array(); //하나의 박스

                // this.calendar_body_day_td.innerHTML = "";
                let num = col;
                let count = 0;

                //dateBox = y + "." + k + ".";

                let calendar_hd_txt = document.createElement('div');


                this.calendarHeaderText.textContent = this.current_year + "." + k + '.' + this.current_date;

                let table = document.createElement('table');
                this.calendar_body_day_td.appendChild(table);
                let tr = [];
                let current_date = [];
                let first_day_of_week = this.getFirstDayOfWeek(this_current_year, this_current_month);
                this.arr_calendar = [];
                for (let i = 0; i < first_day_of_week; i++) {
                    this.arr_calendar.push("");
                }

                for (let l = 1; l <= num; l++) {
                    this.arr_calendar.push(l);
                }

                let rowNum = Math.ceil((this.arr_calendar.length) / 7);

                for (let i = 0; i < rowNum; i++) {
                    let boxWrap = document.createElement('tr');

                    boxWrap.setAttribute('class', 'boxwrap');
                    boxRow[i] = table.appendChild(boxWrap);



                    for (let j = 1; j <= colNum; j++) {
                        let box = document.createElement("td");
                        count++;
                        boxCol = [j];


                        boxCol[j] = boxRow[i].appendChild(box);

                        box.setAttribute('class', 'box');
                        box.innerHTML = '<span>' + this.arr_calendar[count - 1] + '</span>';



                        if (j % 9 == 7) { //n번재의 1번째에 색상을 어떤 액션을 취하는 mod식
                            boxCol[j].classList.add('saturday');
                        }

                        if (j % 9 == 1) { //n번재의 1번째에 색상을 어떤 액션을 취하는 mod식
                            box.classList.add('red');
                        }



                        if (this.arr_calendar[count - 1] !== undefined) {
                            box.innerHTML = '<span>' + this.arr_calendar[count - 1] + '</span>';

                        }

                        if (this.current_month == this.fixedMonth && this.today == Number(this.arr_calendar[count - 1])) {

                            box.querySelector('span').classList.add('active');
                        }

                    }

                }
                this.checkUndefinedinDate();
            }

            this.checkUndefinedinDate = function() {

                let undefinedDay = this.calendar_body_day_td.querySelectorAll('.box');
                //console.log(undefinedDay)
                let n = null;
                for (var udy of undefinedDay) {
                    if (udy.innerText == 'undefined') {
                        udy.innerText = '';
                    }

                }
            }
            this.getFirstDayOfWeek = function(year, month) {
                if (month < 10) month = "0" + month;
                return (new Date(year + "-" + month + "-01").getDay());
            }


            this.getDaysInMonth = function(year, month) {
                return new Date(year, month, 0).getDate();
            }

        }
        var UICheckIn = new uical();

        UICheckIn.init('calendar-1', 'cal-hd-1', 'btnCheckIn', 'prev_btn-1', 'next_btn-1', 'date-1', 'date-2', 'year-1', 'day-checkin');
    </script>



</body>

</html>