<!DOCTYPE html>
<html lang="kr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>TPOD</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!-- Noto Sans koran -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/swiper.css">
    <link rel="stylesheet" type="text/css" href="../css/styles.css">

    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/swiper.min.js"></script>
    <script src="../js/common.js"></script>
</head>
<style>
    .wrapper {
        padding: 10px 20px;
        position: relative;
    }
    
    .grid-list {
        border: 0px solid #ddd;
    }
    
    .grid-list .items {
        margin: 5px 10px 15px 10px;
    }
    
    #calc {
        z-index: 10;
        position: fixed;
        bottom: 10px;
        padding: 10px;
        border: 1px solid #000;
        background-color: #fff;
    }
    
    @media(max-width:760px) {
        .wrapper {
            padding: 10px;
        }
    }
</style>

<body>
    <section class="wrapper">
        <h5 class="pt-50 pb-20">전체리스트</h5>

        <ul class="grid-list">
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>

            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>

            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>

            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>
            <li data-link="#none" class="t-card items">
                <div class="t-card__title">제목이 들어갑니다. 리스트</div>
                <div class="t-card__subtitle">간단한 설명이 들어갑니다.</div>
            </li>


        </ul>

    </section>


    <script>
        const gridList = {

            init: function() {

                this.items = document.querySelectorAll('.grid-list .items'); //현재 정보
                this.container = document.getElementsByClassName('grid-list')[0];
                this.container_flex_width = document.getElementsByClassName('grid-list')[0].clientWidth;

                this.resizeHandler();
                this.delay = 50;
                this.timer = null;
                this.count = 10;


                window.addEventListener('resize', () => {
                    this.resizeHandler();
                });

            },

            reArrange: function(ttt, width) {
                let length = ttt.length;
                for (var i = 0; i < length; i++) {
                    ttt[i].style.width = width + 'px';
                }
            },

            resizeHandler: function() {

                var w_w_width = window.innerWidth;
                this.breakPoint = {
                    'col-xss': 350,
                    'col-xs': 450,
                    'col-sm': 760,
                    'col-md': 1024,
                    'col-lg': 1500,
                    'col-xl': 1650,
                };
                if (this.breakPoint['col-xss'] <= w_w_width && this.breakPoint['col-xs'] >= w_w_width) {
                    this.itemsCol = 1;
                }
                if (this.breakPoint['col-xs'] <= w_w_width && this.breakPoint['col-sm'] >= w_w_width) {
                    this.itemsCol = 2;
                }

                if (this.breakPoint['col-sm'] <= w_w_width && this.breakPoint['col-md'] >= w_w_width) {
                    this.itemsCol = 2;
                }
                if (this.breakPoint['col-md'] <= w_w_width && this.breakPoint['col-lg'] >= w_w_width) { //1024보다 크고  1170보다 작음
                    this.itemsCol = 3;

                }
                if (this.breakPoint['col-lg'] <= w_w_width && this.breakPoint['col-xl'] >= w_w_width) {
                    this.itemsCol = 4;
                }
                if (this.breakPoint['col-xl'] < w_w_width) {
                    this.itemsCol = 5;
                }

                clearTimeout(this.timer);

                this.timer = setTimeout(() => {
                    this.getItems(this.itemsCol);

                    console.log('itemsCol', this.itemsCol, this)

                }, this.delay);

            },
            getItems: function(n) {

                let itemsProps = window.getComputedStyle(document.getElementsByClassName('items')[0]);

                let itemsPadRight = parseInt(itemsProps.paddingRight);
                let itemsPadLeft = parseInt(itemsProps.paddingLeft);
                let itemsMarginRight = parseInt(itemsProps.marginRight);
                let itemsMarginLeft = parseInt(itemsProps.marginLeft);

                this.container.style.marginLeft = -itemsMarginLeft + 'px';
                this.container.style.marginRight = -itemsMarginRight + 'px';

                let border = n * 2;
                this.itemsCol = n;
                let itemsRow = 100 / this.itemsCol;
                let itemsTotal = itemsPadRight + itemsPadLeft + itemsMarginRight + itemsMarginLeft + border;

                let itemsSpace = 'calc(' + itemsRow + '% - ' + itemsTotal + 'px )';
                let i = 0;


                let rowWidth = 0;
                let itemsWidth = [];

                let lastWidth = null;

                for (var item of this.items) {

                    item.style.width = itemsSpace;
                    if (i < n) {
                        itemsWidth[i] = item.clientWidth;
                        rowWidth = rowWidth + itemsWidth[i];
                        if (i == n - 1) {

                            lastWidth = (rowWidth / n) + (border - 2);
                        }
                        i++;
                    }

                    this.reArrange(this.items, lastWidth);
                }


            }
        }

        gridList.init();
    </script>



</body>

</html>