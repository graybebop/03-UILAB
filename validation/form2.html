<!DOCTYPE html>
<html lang="kr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>업로드 파일</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!-- Noto Sans koran -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">


    <link rel="stylesheet" type="text/css" href="../css/styles.min.css">

    <script src="../js/jquery.min.js"></script>
    <script src="../js/common.js"></script>
</head>

<body>
    <div class="tpod-wrapper">
        <div class="tpod-container">
            <div class="tpod-row">
                <div class="tpod-col-12">

                    <form action="#" class="js-form form">
                        <div class="board-write py-50">
                            <h4 class="pb-30">폼데이터 체크</h4>
                            <div class="mb-20">사용법 링크 : https://www.cssscript.com/custom-html5-form-validator-vanilla-javascript-just-validate/</div>
                            <div class="mb-20">깃 허브 링크 : https://github.com/horprogs/Just-validate</div>
                            <div class="mb-20">제목 필드만 현재 적용 되어 있슴.
                                <span class="badge-lg badge-danger">확인</span>버튼을 그냥 눌러보면 에러 메시지가 적용됨</div>
                            <div class="board-write-row" style="border-top:1px solid #ddd;">
                                <div class="lt"><span class="necessary"></span>제목</div>
                                <div class="rt">
                                    <input type="text" id="project-title" data-validate-field="title" style="width:60%;" value="" name="title" />
                                </div>
                            </div>

                            <div class="board-write-row bdr-open-state" id="project-open">
                                <div class="lt">공개여부</div>
                                <div class="rt">
                                    <label class="switch-radio">
                                        <input type="checkbox" data-validate-field="secret" value="secret" name="secret" class="chbbox bdr-state" id="check-state">
                                    <span class="s-b round"></span></label>
                                    <span class="txt" id="check-state-txt">비공개</span>
                                </div>
                            </div>

                            <div class="board-write-row">
                                <div class="lt">예산</div>
                                <div class="rt">
                                    <input type="text" data-validate-field="budget" class="formBudget" value="" name="budget" id="project-budget" style="width:30%" />

                                </div>
                            </div>
                            <div class="board-write-row">
                                <div class="lt"><span class="necessary"></span>전화번호</div>
                                <div class="rt">
                                    <input type="text" data-validate-field="phone" placeholder="" value="" name="phone" style="width:30%" id="project-mobile" /> 유선 혹은 무선 둘중에 하나를 적어주세요.

                                </div>
                            </div>
                            <div class="board-write-row">
                                <div class="lt"><span class="necessary"></span>이메일</div>
                                <div class="rt">
                                    <input type="email" style="width:30%" data-validate-field="email" id="project-email" />
                                </div>
                            </div>
                            <div class="board-write-row">
                                <div class="lt"><span class="necessary"></span>상담시간</div>
                                <div class="rt">
                                    <div class="d-flex-row">
                                        <div>
                                            <input type="text" name="reserve1" value="" class="mr-10" id="date" data-validate-field="date" />
                                        </div>
                                        <div>
                                            <input type="text" value="" name="reserve2" id="time" data-validate-field="time" />
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="board-write-row">
                                <div class="lt">참조사이트</div>
                                <div class="rt">
                                    <input type="text" value="" style="width:50%" id="project-reference" />


                                </div>
                            </div>


                            <div class="board-write-row">
                                <div class="lt"><span class="necessary"></span>요청내용</div>
                                <div class="rt">
                                    <textarea class="txtfield" value="memo" id="project-memo" data-validate-field="memo"></textarea>

                                </div>
                            </div>

                            <div class="board-write-button">

                                <button class="btn btn-dark" type="submit">확인</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="js/just-validate.js"></script>
<script>
    const placeHolderTxt = {
        pTitle: "타이틀을 적어 주세요.",
        pBudget: "에산을 적어 주세요.",
        pMobile: "연락처를 적어 주세요.",
        pEmail: "이메일 주소를 적어 주세요.",
        pReference: "참조사이트가 있으면 적어 주세요.",
        pReserve1: "ex) 2022.2.2",
        pReserve2: "ex) 16:00",
        pMemo: "요청사항을 적어 주세요.",
    }

    window.addEventListener("load", () => {
        setPlaceHolderText("project-title", placeHolderTxt.pTitle);
        setPlaceHolderText("project-budget", placeHolderTxt.pBudget);
        setPlaceHolderText("project-mobile", placeHolderTxt.pMobile);
        setPlaceHolderText("project-email", placeHolderTxt.pEmail);
        setPlaceHolderText("date", placeHolderTxt.pReserve1);
        setPlaceHolderText("time", placeHolderTxt.pReserve2);
        setPlaceHolderText("project-reference", placeHolderTxt.pReference);
        setPlaceHolderText("project-memo", placeHolderTxt.pMemo);
        let checkbox = document.getElementById("check-state");
        checkbox.checked = true;
        checkbox.addEventListener("change", () => {
            if (checkbox.checked) {
                document.getElementById("check-state-txt").innerText = "공개"
                console.log(checkbox.checked)
            } else {
                document.getElementById("check-state-txt").innerText = "비공개"
            }
        });
    });

    function setPlaceHolderText(id, pTxt) {
        let inputFields = document.getElementById(id);
        console.log(inputFields.placeholder, pTxt)
        inputFields.placeholder = pTxt;

    }
    new window.JustValidate('.js-form', {
        errorFieldCssClass: 'is-invalid',
        messages: {
            title: '필수 입력란 입니다.',
            phone: '필수 입력란 입니다.',
            email: '필수 입력란 입니다.',
            date: '필수 입력란 입니다.',
            time: '필수 입력란 입니다.',
            memo: '필수 입력란 입니다.',
        },



        rules: {
            title: {
                required: true,
                //maxLength: 300,
                minLength: 5,
                maxLength: 50,
            },
            phone: {
                required: true,
                phone: true
            },

            email: {

                required: true,
                email: true,

            },
            date: {
                required: true,
                format: 'dd MMM yyyy',
            },
            time: {
                required: true,
            },
            memo: {
                required: true,
            }
            // email: {
            //     required: true,
            //     email: true
            // },
            // checkbox: {
            //     required: true
            // },
            // name: {
            //     required: true,
            //     minLength: 3,
            //     maxLength: 15
            // },
            // text: {
            //     required: true,
            //     maxLength: 300,
            //     minLength: 5
            // },
            // password: {
            //     required: true,
            //     password: true,
            //     minLength: 4,
            //     maxLength: 8
            // },
            // zip: {
            //     required: true,
            //     zip: true
            // },
            // phone: {
            //     phone: true
            // }
        },
        // focusWrongField: true,
        // submitHandler: function(form, values, ajax) {
        //     console.log(values)
        //     ajax({
        //         url: 'https://just-validate-api.herokuapp.com/submit',
        //         method: 'POST',
        //         data: values,
        //         async: true,
        //         callback: (response) => {
        //             console.log(response);
        //         }
        //     });
        // },


    });


    // const validates = new JustValidate('.js-form', {
    //     errorFieldCssClass: 'is-invalid',
    // });

    // validates.addField('#date', [{
    //     plugin: JustValidatePluginDate(() => ({
    //         format: 'dd MMM yyyy',
    //     })),
    //     errorMessage: 'Date should be in dd MMM yyyy format (e.g. 20 Dec 2021)',
    // }, ]);
</script>


<style>
    .js-validate-error-label {
        margin: 10px 0;
        color: red !important;
    }
    
    .js-validate-error-field {
        border: 1px solid red !important;
        color: red !important;
    }
    
    .js-validate-error-field:focus {
        outline: none !important;
    }
    
    .board-write-row .rt input[type="checkbox"]:checked~.s-b {
        background-color: rgb(72, 146, 189);
    }
    
    .board-write-row .lt {
        position: relative;
    }
    
    .necessary:after {
        content: "*";
        width: 5px;
        height: 5px;
        display: inline-block;
        background-color: red;
        margin-right: 3px;
    }
    
    .d-flex-row {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
    }
</style>

</html>