<!DOCTYPE html>
<html lang="kr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>TPOD</title>

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!-- Noto Sans koran -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="../css/normalize.css">
    <link rel="stylesheet" type="text/css" href="../css/common.css">
    <link rel="stylesheet" type="text/css" href="../css/styles.min.css">

    <script src="../js/jquery.min.js"></script>
    <script src="../js/common.js"></script>
</head>

<body>
    <div id="login-container" class="pre-auth">This application requires access to your YouTube account. Please <a href="#" id="login-link">authorize</a> to continue.
    </div>
    <div id="buttons">
        <button id="playlist-button" disabled onclick="createPlaylist()">Create a new Private Playlist</button>
        <br>
        <label>Current Playlist Id: <input id="playlist-id" value='' type="text"/></label>
        <br>
        <label>Video Id: <input id="video-id" value='GZG9G5txtaE' type="text"/></label><button onclick="addVideoToPlaylist()">Add to current playlist</button>
    </div>
    <h3>Playlist: <span id="playlist-title"></span></h3>
    <p id="playlist-description"></p>
    <div id="playlist-container">
        <span id="status">No Videos</span>
    </div>
    <script src="https://www.gstatic.com/external_hosted/jquery2.min.js"></script>
    <script src="auth.js"></script>
    <script src="playlist_updates.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>

    <script>
        // Define some variables used to remember state.
        var playlistId, channelId;

        // After the API loads, call a function to enable the playlist creation form.
        function handleAPILoaded() {
            enableForm();
        }

        // Enable the form for creating a playlist.
        function enableForm() {
            $('#playlist-button').attr('disabled', false);
        }

        // Create a private playlist.
        function createPlaylist() {
            var request = gapi.client.youtube.playlists.insert({
                part: 'snippet,status',
                resource: {
                    snippet: {
                        title: 'Test Playlist',
                        description: 'A private playlist created with the YouTube API'
                    },
                    status: {
                        privacyStatus: 'private'
                    }
                }
            });
            request.execute(function(response) {
                var result = response.result;
                if (result) {
                    playlistId = result.id;
                    $('#playlist-id').val(playlistId);
                    $('#playlist-title').html(result.snippet.title);
                    $('#playlist-description').html(result.snippet.description);
                } else {
                    $('#status').html('Could not create playlist');
                }
            });
        }

        // Add a video ID specified in the form to the playlist.
        function addVideoToPlaylist() {
            addToPlaylist($('#video-id').val());
        }

        // Add a video to a playlist. The "startPos" and "endPos" values let you
        // start and stop the video at specific times when the video is played as
        // part of the playlist. However, these values are not set in this example.
        function addToPlaylist(id, startPos, endPos) {
            var details = {
                videoId: id,
                kind: 'youtube#video'
            }
            if (startPos != undefined) {
                details['startAt'] = startPos;
            }
            if (endPos != undefined) {
                details['endAt'] = endPos;
            }
            var request = gapi.client.youtube.playlistItems.insert({
                part: 'snippet',
                resource: {
                    snippet: {
                        playlistId: playlistId,
                        resourceId: details
                    }
                }
            });
            request.execute(function(response) {
                $('#status').html('<pre>' + JSON.stringify(response.result) + '</pre>');
            });
        }
    </script>
</body>

</html>